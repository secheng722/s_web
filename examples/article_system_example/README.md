# Ree Framework - åšå®¢APIç³»ç»Ÿç¤ºä¾‹

åŸºäº Rust å’Œ Ree æ¡†æ¶æ„å»ºçš„å®Œæ•´åšå®¢APIç³»ç»Ÿï¼Œæä¾›ç”¨æˆ·è®¤è¯ã€æ–‡ç« ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
  - ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
  - JWTä»¤ç‰Œè®¤è¯
  - å¯†ç åŠ å¯†å­˜å‚¨

- ğŸ“ **æ–‡ç« ç®¡ç†ç³»ç»Ÿ**
  - åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ–‡ç« 
  - æ–‡ç« åˆ—è¡¨æŸ¥çœ‹
  - ç”¨æˆ·æƒé™æ§åˆ¶

- ğŸ¨ **å‰ç«¯ç•Œé¢**
  - å“åº”å¼è®¾è®¡
  - ç°ä»£åŒ–UIç•Œé¢
  - AJAXå¼‚æ­¥äº¤äº’

- ğŸ›¡ï¸ **å®‰å…¨ç‰¹æ€§**
  - JWTè®¤è¯ä¸­é—´ä»¶
  - è¯·æ±‚å‚æ•°éªŒè¯
  - SQLæ³¨å…¥é˜²æŠ¤

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: [Ree](https://github.com/lsc/ree) - è½»é‡çº§å¼‚æ­¥Webæ¡†æ¶
- **æ•°æ®åº“**: SQLite + SQLx
- **è®¤è¯**: JWT (jsonwebtoken)
- **å¯†ç åŠ å¯†**: bcrypt
- **åºåˆ—åŒ–**: serde + serde_json
- **å¼‚æ­¥è¿è¡Œæ—¶**: tokio
- **å¼‚æ­¥è¿è¡Œæ—¶**: tokio

### å‰ç«¯
- **HTML5 + CSS3 + JavaScript**
- **å“åº”å¼è®¾è®¡**
- **ç°ä»£åŒ–UIç»„ä»¶**

### å¼€å‘å·¥å…·
- **è¯­è¨€**: Rust 2021 Edition
- **åŒ…ç®¡ç†**: Cargo
- **æ•°æ®åº“**: SQLite

## ğŸ“ é¡¹ç›®ç»“æ„

```
article_system_example/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/              # é…ç½®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ app_state.rs     # åº”ç”¨çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ db/                  # æ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ sqlite.rs        # SQLiteæ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ handlers/            # è¯·æ±‚å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ auth.rs          # è®¤è¯ç›¸å…³å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ article.rs       # æ–‡ç« ç›¸å…³å¤„ç†å™¨
â”‚   â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ auth.rs          # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ user.rs          # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â””â”€â”€ article.rs       # æ–‡ç« æ¨¡å‹
â”‚   â””â”€â”€ routes/              # è·¯ç”±é…ç½®
â”‚       â”œâ”€â”€ mod.rs
â”‚       â”œâ”€â”€ auth_routes.rs   # è®¤è¯è·¯ç”±
â”‚       â”œâ”€â”€ article_routes.rs # æ–‡ç« è·¯ç”±
â”‚       â””â”€â”€ base_routes.rs   # åŸºç¡€è·¯ç”±
â”œâ”€â”€ frontend/                # å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ *.html              # HTMLé¡µé¢
â”‚   â”œâ”€â”€ css/                # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â””â”€â”€ js/                 # JavaScriptæ–‡ä»¶
â”‚       â”œâ”€â”€ app.js          # åº”ç”¨æ ¸å¿ƒ
â”‚       â”œâ”€â”€ auth.js         # è®¤è¯ç›¸å…³
â”‚       â”œâ”€â”€ articles.js     # æ–‡ç« åˆ—è¡¨
â”‚       â””â”€â”€ create-article.js # æ–‡ç« åˆ›å»º
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ app.db             # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ Cargo.toml             # é¡¹ç›®é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Rust 1.70+
- Cargo

### å®‰è£…æ­¥éª¤

1. **è¿›å…¥é¡¹ç›®ç›®å½•**
   ```bash
   cd examples/article_system_example
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   cargo build
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```bash
   cargo run
   ```

4. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://127.0.0.1:3000

### æ•°æ®åº“åˆå§‹åŒ–

åº”ç”¨é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºSQLiteæ•°æ®åº“å’Œå¿…è¦çš„è¡¨ç»“æ„ï¼š

- `users` è¡¨ï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯
- `articles` è¡¨ï¼šå­˜å‚¨æ–‡ç« ä¿¡æ¯

## ğŸ“š APIæ–‡æ¡£

### è®¤è¯ç›¸å…³

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /api/auth/register
Content-Type: application/json

{
  "username": "ç”¨æˆ·å",
  "email": "é‚®ç®±åœ°å€",
  "password": "å¯†ç "
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "username": "ç”¨æˆ·å",
  "password": "å¯†ç "
}
```

#### è·å–ç”¨æˆ·ä¿¡æ¯
```http
GET /api/auth/me
Authorization: Bearer <JWT_TOKEN>
```

### æ–‡ç« ç›¸å…³

#### è·å–æ–‡ç« åˆ—è¡¨
```http
GET /api/articles
```

#### è·å–å•ç¯‡æ–‡ç« 
```http
GET /api/articles/:id
```

#### åˆ›å»ºæ–‡ç« ï¼ˆéœ€è¦è®¤è¯ï¼‰
```http
POST /api/articles/protected
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json

{
  "title": "æ–‡ç« æ ‡é¢˜",
  "content": "æ–‡ç« å†…å®¹"
}
```

#### æ›´æ–°æ–‡ç« ï¼ˆéœ€è¦è®¤è¯ï¼‰
```http
PUT /api/articles/protected/:id
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json

{
  "title": "æ–°æ ‡é¢˜",
  "content": "æ–°å†…å®¹"
}
```

#### åˆ é™¤æ–‡ç« ï¼ˆéœ€è¦è®¤è¯ï¼‰
```http
DELETE /api/articles/protected/:id
Authorization: Bearer <JWT_TOKEN>
```

## âš™ï¸ é…ç½®è¯´æ˜

### åº”ç”¨é…ç½®

åœ¨ `src/main.rs` ä¸­å¯ä»¥ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```rust
// JWTå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä»ç¯å¢ƒå˜é‡è¯»å–ï¼‰
let jwt_secret = "your_jwt_secret_key_here".to_string();

// æœåŠ¡å™¨ç›‘å¬åœ°å€
app.run("127.0.0.1:3000").await?;
```

### æ•°æ®åº“é…ç½®

æ•°æ®åº“æ–‡ä»¶ä½ç½®ï¼š`data/app.db`

å¦‚éœ€ä¿®æ”¹æ•°æ®åº“é…ç½®ï¼Œç¼–è¾‘ `src/db/sqlite.rs` æ–‡ä»¶ã€‚

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„APIç«¯ç‚¹

1. åœ¨ `src/models/` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
2. åœ¨ `src/handlers/` ä¸­å®ç°å¤„ç†é€»è¾‘
3. åœ¨ `src/routes/` ä¸­æ³¨å†Œè·¯ç”±
4. åœ¨å‰ç«¯æ·»åŠ ç›¸åº”çš„JavaScriptä»£ç 

### ä¸­é—´ä»¶å¼€å‘

å‚è€ƒ `src/middleware/auth.rs` å®ç°è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼š

```rust
pub async fn your_middleware(
    state: Arc<AppState>, 
    ctx: RequestCtx, 
    next: Next
) -> Response {
    // ä¸­é—´ä»¶é€»è¾‘
    next(ctx).await
}
```

### æ•°æ®åº“è¿ç§»

ä¿®æ”¹ `src/db/sqlite.rs` ä¸­çš„å»ºè¡¨è¯­å¥æ¥æ›´æ–°æ•°æ®åº“ç»“æ„ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœæ‚¨å‘ç°ä»»ä½•é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ [Issue](../../issues)
- å‘é€é‚®ä»¶è‡³ï¼šyour-email@example.com

## ğŸ“ˆ æ›´æ–°æ—¥å¿—

### v0.1.0 (2025-06-27)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ğŸ“ æ–‡ç« ç®¡ç†åŠŸèƒ½
- ğŸ¨ å‰ç«¯ç•Œé¢
- ğŸ›¡ï¸ JWTè®¤è¯ä¸­é—´ä»¶

---

**ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸**
